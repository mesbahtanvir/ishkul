{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://ishkul.com/schemas/tools/pronunciation.schema.json",
  "title": "Pronunciation Step",
  "description": "Learn correct pronunciation of words/phrases with audio (1-2 minutes)",
  "type": "object",
  "allOf": [
    { "$ref": "_base.schema.json" }
  ],
  "properties": {
    "type": {
      "const": "pronunciation"
    },
    "topic": {
      "type": "string"
    },
    "title": {
      "type": "string"
    },
    "word": {
      "type": "string",
      "description": "The word or phrase to pronounce",
      "minLength": 1,
      "maxLength": 100
    },
    "language": {
      "type": "string",
      "description": "Target language",
      "enum": ["english", "spanish", "french", "german", "japanese", "chinese", "korean", "arabic"]
    },
    "phonetic": {
      "type": "string",
      "description": "IPA or phonetic spelling",
      "maxLength": 100
    },
    "audioUrl": {
      "type": "string",
      "description": "URL to audio pronunciation (generated by TTS)",
      "format": "uri"
    },
    "syllables": {
      "type": "array",
      "description": "Word broken into syllables with stress markers",
      "items": {
        "type": "object",
        "properties": {
          "text": { "type": "string" },
          "stressed": { "type": "boolean", "default": false }
        },
        "required": ["text"]
      }
    },
    "exampleSentences": {
      "type": "array",
      "description": "Example sentences using the word",
      "items": {
        "type": "object",
        "properties": {
          "sentence": { "type": "string" },
          "translation": { "type": "string" }
        },
        "required": ["sentence"]
      },
      "minItems": 1,
      "maxItems": 3
    },
    "similarWords": {
      "type": "array",
      "description": "Words that sound similar (for comparison)",
      "items": {
        "type": "object",
        "properties": {
          "word": { "type": "string" },
          "meaning": { "type": "string" },
          "note": { "type": "string", "description": "Why they might be confused" }
        },
        "required": ["word"]
      },
      "maxItems": 3
    },
    "tips": {
      "type": "array",
      "description": "Pronunciation tips",
      "items": {
        "type": "string"
      },
      "maxItems": 3
    }
  },
  "required": ["type", "topic", "title", "word", "language", "phonetic", "exampleSentences"],
  "additionalProperties": false,

  "_meta": {
    "toolId": "pronunciation",
    "uiComponent": "PronunciationCard",
    "estimatedMinutes": 2,
    "categories": ["language", "vocabulary", "speaking", "audio"],
    "selectionCriteria": {
      "when": [
        "Learning new vocabulary",
        "Word has tricky pronunciation",
        "Language course with spoken component",
        "Commonly mispronounced word"
      ],
      "requires": {
        "goalCategory": ["language", "vocabulary", "speaking"]
      }
    },
    "example": {
      "type": "pronunciation",
      "topic": "English Pronunciation",
      "title": "How to Say 'Entrepreneur'",
      "word": "entrepreneur",
      "language": "english",
      "phonetic": "/ˌɑːn.trə.prəˈnɜːr/",
      "syllables": [
        { "text": "en", "stressed": false },
        { "text": "tre", "stressed": false },
        { "text": "pre", "stressed": true },
        { "text": "neur", "stressed": false }
      ],
      "exampleSentences": [
        {
          "sentence": "She became a successful entrepreneur at age 25.",
          "translation": null
        },
        {
          "sentence": "The entrepreneur pitched her idea to investors.",
          "translation": null
        }
      ],
      "similarWords": [
        {
          "word": "enterprise",
          "meaning": "a business or company",
          "note": "Same root, different ending"
        }
      ],
      "tips": [
        "Stress is on the third syllable: entre-pre-NEUR",
        "The 'eu' sounds like 'er' in American English",
        "French origin - try not to over-pronounce each syllable"
      ]
    }
  }
}
