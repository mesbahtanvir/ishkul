services:
  backend:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: ishkul-backend-dev
    ports:
      - "8080:8080"
    env_file:
      - .env
    environment:
      # Override env vars if needed (takes precedence over .env)
      - ENVIRONMENT=development
      - PORT=8080
      # Path to credentials file (mounted via volume)
      - GOOGLE_APPLICATION_CREDENTIALS=/app/serviceAccountKey.json
    volumes:
      # Mount the service account key for Firebase authentication
      - ./serviceAccountKey.json:/app/serviceAccountKey.json:ro
    # Note: For code changes during development:
    # 1. Edit your Go files
    # 2. Rebuild the image: docker-compose build
    # 3. Restart the container: docker-compose up -d
    # Or use air tool for automatic rebuilds (see Dockerfile)
    restart: unless-stopped
    networks:
      - ishkul-network

networks:
  ishkul-network:
    driver: bridge
